/**
 * Generated by `createservice billing.EpsRequestService`
 */

const { makeClient } = require('@core/keystone/test.utils')
const { expectToThrowAuthenticationError } = require('@condo/domains/common/utils/testSchema')

const { epsRequestByTestClient } = require('@condo/domains/billing/utils/testSchema')
const { GROUP_LIST_XML } = require('@condo/domains/billing/constants/eps')
const { epsReplaceEnvParamsInXml } = require('@condo/domains/billing/utils/serverSchema')


describe('EpsRequestService', () => {
    test('anonymous: can not execute', async () => {
        const client = await makeClient()
        const payload = { xml: epsReplaceEnvParamsInXml(GROUP_LIST_XML) }
        await expectToThrowAuthenticationError(async () => {
            await epsRequestByTestClient(client, payload)
        }, 'result')
    })
})
