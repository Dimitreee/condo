// auto generated by kmigrator
// KMIGRATOR:0069_auto_20211020_1647:IyBHZW5lcmF0ZWQgYnkgRGphbmdvIDMuMi42IG9uIDIwMjEtMTAtMjAgMTE6NDcNCg0KZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1pZ3JhdGlvbnMsIG1vZGVscw0KDQoNCmNsYXNzIE1pZ3JhdGlvbihtaWdyYXRpb25zLk1pZ3JhdGlvbik6DQoNCiAgICBkZXBlbmRlbmNpZXMgPSBbDQogICAgICAgICgnX2RqYW5nb19zY2hlbWEnLCAnMDA2OF9hdXRvXzIwMjExMDE4XzIxMDcnKSwNCiAgICBdDQoNCiAgICBvcGVyYXRpb25zID0gWw0KICAgICAgICBtaWdyYXRpb25zLkFkZEZpZWxkKA0KICAgICAgICAgICAgbW9kZWxfbmFtZT0ndXNlcicsDQogICAgICAgICAgICBuYW1lPSdwZXJtaXNzaW9ucycsDQogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksDQogICAgICAgICksDQogICAgICAgIG1pZ3JhdGlvbnMuQWRkRmllbGQoDQogICAgICAgICAgICBtb2RlbF9uYW1lPSd1c2VyaGlzdG9yeXJlY29yZCcsDQogICAgICAgICAgICBuYW1lPSdwZXJtaXNzaW9ucycsDQogICAgICAgICAgICBmaWVsZD1tb2RlbHMuSlNPTkZpZWxkKGJsYW5rPVRydWUsIG51bGw9VHJ1ZSksDQogICAgICAgICksDQogICAgXQ0K

exports.up = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field permissions to user
--
ALTER TABLE "User" ADD COLUMN "permissions" jsonb NULL;
--
-- Add field permissions to userhistoryrecord
--
ALTER TABLE "UserHistoryRecord" ADD COLUMN "permissions" jsonb NULL;
COMMIT;

    `)
}

exports.down = async (knex) => {
    await knex.raw(`
    BEGIN;
--
-- Add field permissions to userhistoryrecord
--
ALTER TABLE "UserHistoryRecord" DROP COLUMN "permissions" CASCADE;
--
-- Add field permissions to user
--
ALTER TABLE "User" DROP COLUMN "permissions" CASCADE;
COMMIT;

    `)
}
